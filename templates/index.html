<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Home page</title>
    <link rel="stylesheet" href="/static/css/index.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=3d&display=swap">
</head>
<body>

    <h1 class="font-effect-3d">Image Depixelation</h1>

    <div class="row">
        <div class="column">
            <div class="card">
                <p class="informativeText">Input</p>
                <canvas id="imageUploadedDisplayed"></canvas>
            </div>
        </div>
        <div class="column">
            <div class="card">
                <p class="informativeText">Output</p>
                <canvas id="imageResult"></canvas>
            </div>
        </div>
    </div>

    <input type="file" id="imageUploaded" onchange="uploadImage()" multiple>

    <form action="/process_image" method="POST" enctype="multipart/form-data">
        <div class="button-container"></div>
            <button class="button" type="submit">Process Image</button>
            <button class="button" onclick="saveImage()">Save</button>
            <button class="button" onclick="cancelAction()">Discard</button>
        </div>
    </form>

    <script>
        document.querySelector('form').addEventListener('submit', function(event) {
            event.preventDefault();

            var formData = new FormData(this);
            var xhr = new XMLHttpRequest();

            xhr.open('POST', '/process_image', true); // Specify the URL and HTTP method
            xhr.onload = function() {
                if (xhr.status === 200) {
                    var response = JSON.parse(xhr.responseText);
                    // Handle the response and update the imageResult canvas
                    console.log('Request successful');
                } else {
                    console.log('Request failed');
                }
            };

            xhr.send(formData); // Send the form data to the server
        });
    </script>

    <script src="/static/js/index.js"></script>
    <script src="https://www.dukelearntoprogram.com/course1/common/js/image/SimpleImage.js"></script>
</body>
</html>